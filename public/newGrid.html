<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="newGrid.css">
  <title></title>
</head>
<body>

  <ul class="flexWrapper">

    <li class="flexCell hoverCell">
      <div class="Graphic" id="ba_bubble_image">
      </div>
      <div class="SubTextBox">
      </div>
    </li>

    <li class="flexCell hoverCell">
      <div class="Graphic" id="ba_bubble_image">
      </div>
      <div class="SubTextBox">

      </div>
    </li>

    <li class="flexCell hoverCell">
      <div class="Graphic" id="ma_bubble_image">
      </div>
      <div class="SubTextBox">
        3<br>4 <br> 5<br> 6 <br> 7 <br> 8
      </div>
    </li>

    <li class="flexCell hoverCell">
      <div class="Graphic" id="phd_bubble_image">
      </div>
      <div class="SubTextBox">
        4
      </div>
    </li>


    <li class="flexCell hoverCell">
      <div class="Graphic" id="ba_bubble_image">
      </div>
      <div class="SubTextBox">
      </div>
    </li>

    <li class="flexCell hoverCell">
      <div class="Graphic" id="ba_bubble_image">
      </div>
      <div class="SubTextBox">
      </div>
    </li>

    <li class="flexCell hoverCell">
      <div class="Graphic" id="ma_bubble_image">
      </div>
      <div class="SubTextBox">
        3
      </div>
    </li>

    <li class="flexCell hoverCell">
      <div class="Graphic" id="phd_bubble_image">
      </div>
      <div class="SubTextBox">
        4
      </div>
    </li>


  </ul>


</body>

<script>
  // Lege Grids mit n Spalten an
  function updateGrids(n_columns) {
    var gridsList = document.querySelectorAll(".gridWrapper");
    for (var i = 0; i < gridsList.length; i++) {
      var cellsList = gridsList[i].children;
      var rowCounter = 0;
      for (var j = 0; j < cellsList.length; j++) {
        // Erhöhe Reihenzähler alle n-Iterationen
        if (j%n_columns == 0) {rowCounter++;}
        cellsList[j].style.msGridRow = rowCounter;
        cellsList[j].style.msGridColumn = j % n_columns + 1;
      }
    }
  }
  // EventListener ist gepoppt
  function mediaMatch() {
    var max_600 = window.matchMedia('(max-width: 600px)');
    var max_1083 = window.matchMedia('(max-width: 1083px)');
    //Breite: <600px  ->  2-Spalten-Grids
    if (max_600.matches) {updateGrids(2);}
    //Breite: 600px-1083px  ->  3-Spalten-Grids
    else if(max_1083.matches) {updateGrids(3);}
    //Breite: >1083px  ->  4-Spalten-Grids
    else {updateGrids(4);}
  }

  function addIEListener() {
    if (matchMedia) {
      var media_600 = window.matchMedia('(max-width: 600px)');
      var media_1083 = window.matchMedia('(max-width: 1083px)');
      media_600.addListener(mediaMatch);
      media_1083.addListener(mediaMatch);
      mediaMatch();
    }
  }

  function enableGrid() {
    var wrapperList = document.querySelectorAll(".flexWrapper");
    for (var i = 0; i < wrapperList.length; i++) {
      var cellsList = wrapperList[i].children;
      wrapperList[i].classList.remove("flexWrapper");
      wrapperList[i].classList.add("gridWrapper");
      // Entferne flexCell wegen width-property
      for (var j = 0; j < cellsList.length; j++) {
        cellsList[j].classList.remove("flexCell");
      }
    }
    // IE: media-Listener hinzufügen, um Grid-Zellen zuweisen
    if(window.document.documentMode){
      addIEListener();
    }
  }

  enableGrid();

</script>

</html>
